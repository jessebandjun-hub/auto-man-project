这是一个经过深度优化、集成了 **“视频剪辑模块”** 并明确了 **“提示词+垫图双重一致性”** 逻辑的最终版产品设计方案。

产品名称：**AI 绘梦工坊 (AI Storyboard Studio)**

---

### 一、 产品总体架构图 (Product General Architecture)

本架构设计遵循 **“资产驱动生产”** 的逻辑，底层由 AI 模型层支撑，中间是核心业务逻辑，上层为用户操作的四大模块。

#### 1. 基础设施层 (Infrastructure & AI)

* **大语言模型 (Logic Core):** **Doubao-seed**
* *职责:* 剧本创作、角色特征提取、Prompt 组装与优化、分镜拆解、视频脚本生成。


* **图像生成模型 (Visual Core):** **Doubao-Image** (支持 ControlNet/Adapter 能力)
* *职责:* 角色定妆图生成、分镜绘图、参考图控制。


* **视频生成模型 (Motion Core):** **Doubao-Video** (或其他图生视频模型)
* *职责:* Image-to-Video 生成，让分镜动起来。


* **数据存储 (Data Layer):** 向量数据库 (存储角色特征 Tags) + 对象存储 (存储定妆照、分镜图、视频片段)。

#### 2. 核心业务逻辑层 (Business Logic)

* **一致性引擎 (Consistency Engine):** 负责将“文本特征向量”与“参考垫图”进行加权融合。
* **工作流编排 (Workflow Orchestrator):** 串联 文本 -> 图像 -> 视频 的自动化流水线。

#### 3. 用户功能层 (Modules) - *四大核心模块*

1. **项目管理 (Project Hub):** 项目与集数管理。
2. **设定室 (Asset Studio):** 剧本、角色卡（图+文）的生产与锁定。
3. **分镜台 (Storyboard Lab):** 分镜拆解、画面生成、提示词微调。
4. **剪辑台 (Video Editor):** *[新增]* 图生视频、时间轴拼接、配音字幕。

---

### 二、 核心方案：双重一致性逻辑 (Character Consistency Strategy)

这是本产品的技术壁垒，采用 **“文本特征拼装 (主) + 图像参考控制 (辅)”** 的混合模式。

* **逻辑公式：**


* **具体执行：**
1. **文本锚点 (Text Anchor):** 在“设定室”阶段，Doubao-seed 将角色外貌拆解为一组固定的 Tags（如 `silver hair`, `red scarf`, `cyberpunk coat`）。生成分镜时，这些 Tags 会**强制拼接**在 Prompt 开头。
2. **视觉锚点 (Visual Anchor):** 在“设定室”阶段，用户锁定一张 **“标准定妆照”**。生成分镜时，系统将此图作为 **Reference Control (垫图)** 传入后台。
* *技术参数:* 设置 Control Weight (权重) 为 0.4 ~ 0.6。
* *作用:* 文本负责细节准确（比如必须戴眼镜），垫图负责大体结构和画风统一（脸型、头身比）。





---

### 三、 详细功能模块设计 (Detailed Modules)

#### 1. 新建项目与集数 (Project Hub)

* **功能:** 传统的 CRUD 操作。
* **数据隔离:** 角色资产库默认在“项目”级共享，分镜在“集数”级独立。

#### 2. 设定室 (Asset Studio) —— *资产生产车间*

* **步骤 A - 剧本生成:** 输入创意，调用 Doubao-seed 生成剧本大纲。
* **步骤 B - 角色定妆 (关键):**
* **提取:** AI 从剧本提取 5 个角色。
* **生成与交互:**
* 用户输入/修改角色描述。
* AI 生成 4 张预览图。
* 用户选中一张满意的图，点击 **“锁定角色”**。


* **后台动作:** 系统同时保存 **“这张图的 URL” (作为垫图)** 和 **“生成这张图的 Prompt” (作为特征 Tags)**。



#### 3. 分镜台 (Storyboard Lab) —— *静态视觉生产*

* **步骤 A - 脚本拆解:** 调用 Doubao-seed 将剧本拆解为分镜列表（镜号、景别、内容、对白）。
* **步骤 B - 画面生成:**
* 系统自动识别当前分镜里的角色（例如：李逍遥）。
* **自动调用:** 取出“李逍遥”的特征 Tags + 垫图。
* **AI 交互 (Doubao-seed):** 结合当前分镜动作（如“哭泣”），优化提示词。
* **生成:** 输出分镜图。


* **步骤 C - 弹窗精修:**
* 对不满意的图点击“精修”。
* 聊天窗输入：“让他笑得更开心一点”。
* AI 保持垫图和特征 Tags 不变，仅修改动作描述词，重新生成。



#### 4. 剪辑台 (Video Editor) —— *[新增] 动态视频合成*

* **界面布局:**
* **上部:** 视频预览窗口。
* **左下:** 分镜图素材库 (从模块 3 自动同步过来)。
* **右下:** 多轨道时间轴 (视频轨、音频轨、字幕轨)。


* **核心功能:**
1. **图生视频 (Image-to-Video):**
* 用户拖拽一张分镜图到时间轴。
* **交互:** 选中该图，输入 **“动态提示词”** (Motion Prompt)，例如：“镜头缓慢推近，头发随风飘动”。
* **调用:** Doubao-Video 模型生成 3-5 秒的视频片段。


2. **智能补帧:** 针对相邻的两个分镜，可选择“生成过渡视频”，使转场更丝滑。
3. **字幕与配音:**
* **字幕:** 一键导入剧本中的对白，自动匹配时间轴。
* **配音:** 调用 TTS (语音合成) 接口，根据角色性别生成配音。


4. **导出:** 最终渲染为 MP4 视频文件。



---

### 四、 用户操作流 (User Journey)

1. **进场:** 创建项目《仙侠传》 -> 第1集。
2. **写书:** 输入“少年剑客复仇记”，AI 出剧本。
3. **捏人:** 调整并锁定男主“李逍遥”的**文字描述**和**一张帅气全身照**。
4. **画图:** 点击“生成分镜”，系统自动产出 20 张分镜图（脸都是李逍遥）。针对第 5 张图不满意，弹窗对话“背景换成雪天”，重绘完成。
5. **做视频:** 进入剪辑台，把 20 张图拖入轨道。选中第 5 张图，输入“大雪纷飞”，生成动态视频。添加自动配音。
6. **出片:** 点击导出，获得样片。

---

### 五、 设计总结 (Design Summary)

* **准确性保证:** 利用 **Doubao-seed** 强大的语义理解能力，确保从剧本到画面的逻辑连贯。
* **一致性保证:** **“Tag + 垫图”** 策略是目前业界解决 AI 角色一致性最成熟的方案，能有效防止“千人千面”。
* **完整性:** 从文本到视频的一站式工作流，满足了内容创作者的核心需求。

